# Furniture AI Agent - Full-Stack Web App

A full-stack application with FastAPI backend and React frontend that simulates an AI agent for furniture data processing.

## 🏗️ Project Structure

```
furniture-video/
├── backend/                    # FastAPI server
│   ├── main.py                # Main FastAPI application
│   └── requirements.txt       # Python dependencies
├── frontend/                  # React + TypeScript + Vite
│   ├── public/
│   │   └── 4x4_furniture_image.png
│   ├── src/
│   │   ├── App.tsx           # Main React component
│   │   ├── App.module.css    # Component styles
│   │   ├── main.tsx          # React entry point
│   │   └── index.css         # Global styles
│   ├── package.json
│   ├── tsconfig.json
│   └── vite.config.ts
└── 4x4_furniture_image.png   # Original image file
```

## 🚀 Setup & Installation

### Environment Setup

1. **Create environment file in backend directory:**
   ```bash
   cd backend
   touch .env
   ```

2. **Configure your GMI Cloud API key:**
   Edit `backend/.env` and add your actual JWT token:
   ```env
   GMI_CLOUD_API_KEY=your-actual-jwt-token-here
   ```
   
   Replace `your-actual-jwt-token-here` with your actual GMI Cloud API JWT token (without the "Bearer " prefix).

### Backend (FastAPI)

1. **Navigate to backend directory:**
   ```bash
   cd backend
   ```

2. **Create virtual environment (recommended):**
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Run the FastAPI server:**
   ```bash
   python main.py
   ```
   
   The backend will be available at: `http://localhost:8000`

### Frontend (React + Vite)

1. **Navigate to frontend directory:**
   ```bash
   cd frontend
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Run the development server:**
   ```bash
   npm run dev
   ```
   
   The frontend will be available at: `http://localhost:5173`

## 🎯 Usage

1. **Start both servers** (backend on port 8000, frontend on port 5173)
2. **Open the frontend** in your browser at `http://localhost:5173`
3. **Engage in conversation with the AI agent** through a 6-step process:
   - **Welcome**: AI introduces itself and asks about your project
   - **Space Details**: Describe the room type, size, and requirements
   - **Style Preferences**: Share your aesthetic preferences and inspirations
   - **Budget & Requirements**: Discuss budget considerations and specific needs
   - **AI Analysis**: Agent processes your requirements using GMI Cloud API
   - **Results**: View your personalized furniture collection with explanations

4. **Interactive Features**:
   - Real-time chat interface with typing indicators
   - Progress tracking through visual step indicators
   - Responsive design with smooth animations
   - Individual furniture images with detailed property tags

## 🔌 API Endpoints

### Backend (`http://localhost:8000`)

- **GET** `/api/furniture` - Returns all 16 furniture items with detailed properties
- **POST** `/api/conversation` - Handles full AI conversation flow with Kimi K2, manages step progression
- **POST** `/api/run-agent` - Processes final requirements for furniture selection using AI
- **POST** `/api/selected-furniture` - Returns only AI-selected furniture items based on indices
- **GET** `/` - Root endpoint returning API status

## ✨ Features

### 🤖 **Fully AI-Driven Conversation**
- **Dynamic AI Responses**: Every response generated by Kimi K2 - no hardcoded messages
- **Intelligent Step Management**: AI decides when user has provided sufficient information to advance
- **Natural Conversation Flow**: AI politely asks for elaboration if responses are incomplete
- **Context-Aware Dialogue**: Full conversation history and collected data sent to AI for context
- **Unique Interactions**: Every conversation is different - AI generates fresh, personalized responses

### 🎨 **Polished User Experience**  
- **Real-time Chat**: Message bubbles with typing indicators and timestamps
- **Progress Visualization**: Interactive step indicators showing conversation progress
- **Smooth Animations**: Fade-ins, slide transitions, and hover effects throughout
- **Responsive Layout**: Adaptive design from desktop to mobile with split-screen results

### 🧠 **Intelligent Furniture Curation**
- **AI-Powered Selection**: Uses GMI Cloud API with Kimi-K2-Instruct model
- **Style Cohesion**: Considers aesthetic harmony and functional compatibility
- **Individual Images**: Each piece displays with cropped 256x256 image and property tags
- **Detailed Metadata**: Shows style, material, dimensions, and pricing for each piece

### 🛠️ **Technical Excellence**
- **TypeScript**: Full type safety with advanced interfaces and enums
- **Modern CSS**: Advanced gradients, backdrop filters, and CSS animations
- **Error Resilience**: Graceful handling of API failures with fallback responses
- **State Management**: Clean finite state machine implementation

## 🛠️ Tech Stack

**Backend:**
- FastAPI (Python web framework)
- GMI Cloud API integration with Kimi-K2-Instruct model
- Requests library for HTTP API calls
- Python-dotenv for environment variable management
- Uvicorn (ASGI server)
- CORS middleware for cross-origin requests

**Frontend:**
- React 18 with TypeScript
- Vite (build tool and dev server)
- CSS Modules for styling
- Fetch API for HTTP requests

## 📝 Development Notes

### **Architecture**
- **Backend**: FastAPI on port `8000` with GMI Cloud API integration
- **Frontend**: Vite + React + TypeScript on port `5173` with conversational state machine
- **State Management**: 6-state HCI finite state machine (Welcome → Space → Style → Budget → Analysis → Results)
- **CORS**: Configured to allow cross-origin requests from frontend

### **AI Integration**
- **Model**: Kimi-K2-Instruct via GMI Cloud API for ALL conversation responses
- **Dynamic Flow**: AI determines conversation pace and when to advance between steps
- **Context Management**: Full conversation history + user data sent with each API call
- **Intelligent Validation**: AI politely requests clarification for insufficient responses
- **Selection Logic**: Separate AI call for furniture curation based on collected preferences
- **Error Resilience**: Graceful fallbacks with apologetic, natural language responses

### **Media Assets**
- **Image Processing**: Original 1024x1024 spritesheet split into 16 individual 256x256 images
- **Display**: Each furniture piece shows with its own cropped image and property tags
- **Storage**: Individual images stored in `frontend/public/furniture/` directory

### **Data Structure**
- **Furniture Items**: Name, price, detailed properties (type, style, material, color, dimensions), description
- **Conversation State**: Tracks user responses through space type, style preferences, budget, and requirements
- **Messages**: Timestamped chat history with AI/user distinction and typing states